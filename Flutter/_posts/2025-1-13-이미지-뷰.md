---
layout: post
title: "Flutter 이미지 뷰어"
tags:  flutter statefulwidget
excerpt_image: ""
---

이미지 뷰어 앱은 이미지 5개를 보여주고(전체화면) 스와이프를 통해서 이미지를 변경할 수 있다 또한 Timer를 통해서 일정시간이 지나면 다음 사진으로 넘어가도록 한다

### 위젯 생명주기

위젯 생명주기는 위젯이 화면에 그려지는 순간부터 삭제되는 순간까지를 의미한다

* **StatelessWidget**: 상태가 없는 위젯이다 StatelessWidget이 빌드되면 생성자가 실행된다 필수로 오버라이드해야 하는 **build( )함수**가 실행된다 이후 build 함수에 반환한 위젯이 화면에 랜더링 된다
  플러터에서 모든 위젯은 Widget클래스를 상속하고 Widget 클래스는 불변 특성을 가지고 있다 하지만 위젯의 속성을 변경해야할 때가 있는다 build 함수에서 매개변수를 받고 이 매개변수 값이 바뀐다면 build 함수를 재실행해야한다 하지만 StatelessWidget으로 선언된다면 불변이기 때문에 인스턴스를 아예 새로 생성한 후 기존 인스턴스를 대체해야한다
* **StatefulWidget**: 위젯 내부에서 build() 함수를 재실행해야하는 상황이 존재한다 이때 StatefulWidget을 사용하면된다 
  StatefulWidget는 위젯 클래스와 스테이트 클래스 2개로 구성되어있다 

&nbsp;

#### StatefulWidget의 생성

##### 1. 위젯 생성

* StatefulWidget 생성자 호출하면 StatefulWidget 인스턴스가 생성되고 이과정에서 위젯의 설정값(프로퍼티)가 초기화된다
* flutter가 createState 메서드를 호출하여 **State** 객체를 생성한다

&nbsp;

##### 2. 초기화 단계

**super.initState()**를 반드시 호출해서 초기 상태를 설정하거나, 비동기 작업을 시작할 때 사용한다

&nbsp;

##### 3. UI 생성 및 업데이트

**build**를 통해서 위젯의 UI를 생성한다 상태가 변경되면 다시 호출한다 항상 UI를 리턴해야 한다

&nbsp;

##### 4. 상태 변경

**setState**는 상태를 변경하고 변경된 상태를 기반으로 build 메서드를 다시 호출해 UI를 업데이트 한다

&nbsp;

##### 5. 위젯 변경 감지

**didUpdateWidget**은 부모 위젯에 의해 현재 위젯이 업데이트 될 때 호출된다
이전위젯 (oldWidget)과 새로운 위젯(this.widget)을 비교해 차이점을 처리할 수 있다

&nbsp;

##### 6. 종료 단계

* **deactivate** 위젯이 위젯 트리에서 제거될 때 호출된다 이 메서드가 호출된 후 위젯이 다시 트리에 추가될 수도 있다
* **dispose**는 State객체가 영구적으로 제거될 때 호출된다 리소스 해제 작업을 수행
  **super.dispose()**를 호출해야한다

&nbsp;

#### 전체 생명 주기

StatefulWidget 생성자 → createState → initState → build
여기서 상태 변경시: setState →  build
위젯 업데이트시: didUpdateWidget → build
제거시: deactive → dispose

&nbsp;

