---
layout: post
title: "api를 이용해서 유튜브 영상 재생"
tags:  flutter api
excerpt_image: ""

---

HTTP기반의 api는 REST API, GraphQL, gRPC등이 존재한다 여기서 주로 사용하는것은 REST api를 이용한다 rest api에는 get, post, delete, put등 메서드를 이용한다 이 메서드들을 이요해서 CRUD 연산을 한다

#### 플러터에서 HTTP요청

`flutter pub add dio`를 입력해서 플러그인을 설치한다

``` dart
import 'package:flutter/material.dart';
import 'package:dio/dio.dart';

void main() {
  runApp(MyApp());
}

class MyApp extends StatefulWidget {
  @override
  _MyAppState createState() => _MyAppState();
}

class _MyAppState extends State<MyApp> {
  final Dio _dio = Dio();
  String _data = "데이터 없음";

  // GET 요청 실행
  void _fetchData() async {
    try {
      Response response = await _dio.get("https://jsonplaceholder.typicode.com/todos/1");
      setState(() {
        _data = response.data.toString();
      });
    } catch (e) {
      setState(() {
        _data = "오류 발생: $e";
      });
    }
  }

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home: Scaffold(
        appBar: AppBar(title: Text("Dio GET 요청 예제")),
        body: Center(
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            children: [
              ElevatedButton(
                onPressed: _fetchData,
                child: Text("데이터 가져오기"),
              ),
              SizedBox(height: 20),
              Text(_data, textAlign: TextAlign.center),
            ],
          ),
        ),
      ),
    );
  }
}
```

async와 await를 통해서 비동기 함수를 만들었고 dio 객체를 생성한뒤에 dio의 get메서드와 url을 통해서 데이터를 받는다 받은후 string으로 변경해서 화면에 출력하는 코드이다

<table><td><center><img alt="" src="https://github.com/user-attachments/assets/106c45a4-c9bc-4399-83c3-8a9fb3a30f82" style="zoom:20%;" /></center></td><td><center><img alt="" src="https://github.com/user-attachments/assets/f3ae27a5-4bda-4f8e-b245-7ea8591800ed" style="zoom:20%;" /></center></td></table>

&nbsp;

#### JSON

HTTP 요청에서 body를 구성할 때 xml, json으로 나뉜다 하지만 요즘은 대부분 json을 주로 이용한다 

``` json
{
  'name': 'code',
  'languages': ['c','java','swift'],
  'age': 2
}
```

위 형태가 json의 형태이다

&nbsp;

#### api 설정하기

유튜브 api를 사용할려면 이전에 사용한 api 토큰을 이용하면 되지만 약간의 추가 설정이 필요하다

<center>
<img src="https://github.com/user-attachments/assets/51e1895c-b462-4343-938f-cc762cbd1ea8" style="zoom:50%;">
</center>

검색에 youtube를 검색 후 이동한다

<center>
<img src="https://github.com/user-attachments/assets/52c743ef-f7fc-47a0-9587-3978624a149e" style="zoom:50%;">
</center>

사용을 눌러 활성화 시킨다

&nbsp;

## 프로젝트

### 1. pubspec.yaml 설정하기

`flutter pub add youtube_player_flutter`와 `flutter pub add dio`를 이용해서 2개의 플러그인을 설치한다

``` yaml
dependencies:
  flutter:
    sdk: flutter

  cupertino_icons: ^1.0.8
  dio: ^5.8.0
  youtube_player_flutter: ^9.1.1
```

