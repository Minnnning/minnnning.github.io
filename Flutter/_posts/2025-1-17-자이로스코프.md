---
layout: post
title: "자이로스코프,가속도 센서를 이용한 주사위 앱"
tags:  flutter
excerpt_image: ""
---

기기의 자이로스코프 센서, 가속도 센서를 이용해서 모바일 기기의 흔듦을 감지해서 주사위를 굴리는 앱을 만든다 또한 사용자가 민감도를 조절하는 기능도 구현한다

#### 가속도계

핸드폰에는 가속도계가 존재한다 물체가 특정방향으로 이동하는 가속도가 어느 정도인지 숫자로 측정하는 장치이다 3개의 축으로 되어있고 x축 좌우이동, y축 위 아래이동, z축 앞뒤이동(핸드폰을 전면에서 봤을때 기준)이다 이 값의 결과는 double로 받는다

&nbsp;

#### 자이로스코프

자이로스코프는 가속도계의 단점을 보안해서 x,y,z축의 회전을 측정할 수 있다 

x축은 핸드폰을 좌우로 회전, y축은 위아래로 회전, z는 앞뒤로 회전을 의미한다

&nbsp;

#### Sensor_Plus 패키지 사용

위 자이로스코프와 가속도 센서를 이용할려면 sensor_plus 패키지가 필요하다 또한 각각의 센서들은 x,y,z의 움직임을 반환하는데 이를 정규화해줘야 한다 여기서는 shake 패키지를 이용해서 미리 정규화된 패키지를 사용한다

``` yaml
dependencies:
  flutter:
    sdk: flutter

  cupertino_icons: ^1.0.8
  sensors_plus: ^6.1.1  #pubspec.yaml에 추가
```

``` dart
// main.dart
import 'package:flutter/material.dart';
import 'package:sensors_plus/sensors_plus.dart';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home: SensorExample(),
    );
  }
}

class SensorExample extends StatefulWidget {
  @override
  _SensorExampleState createState() => _SensorExampleState();
}

class _SensorExampleState extends State<SensorExample> {
  late Stream<AccelerometerEvent> _accelerometerStream;

  @override
  void initState() {
    super.initState();
    _accelerometerStream = accelerometerEvents;
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('Sensors Plus Example'),
      ),
      body: StreamBuilder<AccelerometerEvent>(
        stream: _accelerometerStream,
        builder: (context, snapshot) {
          if (!snapshot.hasData) {
            return const Center(child: CircularProgressIndicator());
          }

          final AccelerometerEvent event = snapshot.data!;
          return Center(
            child: Text(
              'X: ${event.x.toStringAsFixed(2)}\n'
              'Y: ${event.y.toStringAsFixed(2)}\n'
              'Z: ${event.z.toStringAsFixed(2)}',
              style: const TextStyle(fontSize: 24),
              textAlign: TextAlign.center,
            ),
          );
        },
      ),
    );
  }
}
```

&nbsp;

<center>
<img src="https://github.com/user-attachments/assets/8d54e9dc-dce4-4b1c-bed5-9db601090d89" style="zoom:20%;">
</center>

