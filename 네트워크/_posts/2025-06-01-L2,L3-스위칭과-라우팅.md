---
layout: post
tags: 라우터 스위치
---

오토에버 클라우드 네트워크 강의 때 들었던 와 데이터 링크와 네트워크 계층에 대해서 다시 정리한다

## L2 데이터링크 계층

- **전달 단위**: **프레임(frame)**

- **주소 체계**: **MAC 주소** (48비트, 예: `00:1A:2B:3C:4D:5E`)

- **주요 장비**: **스위치(switch)**

&nbsp;

**1. MAC 학습 (Learning)**

- 프레임 수신 시, 출발지 MAC과 들어온 포트 정보를 MAC 테이블에 기록

**2. 포워딩 (Forwarding)**

- 목적지 MAC이 테이블에 있으면 해당 포트로 프레임만 전달

**3. 플러딩 (Flooding)**

- 목적지 MAC을 모르면 모든 포트(브로드캐스트 도메인)로 전달

**4. 필터링 (Filtering)**

- 목적지 MAC이 자신(스위치)일 경우 전달하지 않음

**5. VLAN(가상 LAN)**

- VLAN(Virtual LAN)은 물리적으로 같은 네트워크 스위치에 연결된 포트들을 논리적으로 분리해 마치 서로 다른 LAN처럼 동작하게 해 주는 기술
- 서로 다른 VLAN끼리는 기본적으로 L2 스위치만으로 통신 불가 *L3 라우터로 넘어가야한다*
- 보통 보안·트래픽 격리·관리 편의성을 위해 사용

&nbsp;

**스위치 장단점**

| 장점                                   | 단점                                               |
| -------------------------------------- | -------------------------------------------------- |
| 저지연·고속 프레임 전달                | 브로드캐스트 폭증 시 성능 저하 (브로드캐스트 폭풍) |
| 네트워크 세분화(VLAN)로 보안·관리 용이 | 서로 다른 VLAN 간에는 라우팅 장비 필요             |

&nbsp;

## L3 네트워크 계층

- **전달 단위**: **패킷(packet)**

- **주소 체계**: **IP 주소** (IPv4, IPv6)

- **주요 장비**: **라우터(router)**

&nbsp;

**1. 라우팅 테이블 조회**

예시 라우팅 테이블

| 대상 네트워크 (Destination) | 넥스트 홉 (Next Hop) | 인터페이스 |
| --------------------------- | -------------------- | ---------- |
| 0.0.0.0/0                   | 203.0.113.1 (ISP)    | eth0       |
| 10.0.0.0/8                  | 10.0.0.1             | eth1       |
| 192.168.1.0/24              | 192.168.1.254        | eth2       |
| 192.168.1.0/25              | 192.168.1.200        | eth3       |
| 192.168.1.128/25            | 192.168.1.253        | eth2       |

- 목적지 IP에 가장 길게 매치되는 네트워크(최장 접두사 매치)를 찾음
- 예를 들어, 호스트 A에서 `192.168.1.100`로 가는 패킷을 받았다 치면, 라우터는 “192.168.1.100”이 어디에 속하는지 찾기 시작
- `192.168.1.0/24` → 범위 `192.168.1.0–192.168.1.255` 에 속하고
  `192.168.1.0/25` → 범위 `192.168.1.0–192.168.1.127` 에도 속한다
  **가장 긴 접두사**(Prefix Length)가 `/25` (25비트)가 `/24`(24비트)보다 길기 때문에,
  → **`192.168.1.0/25` 경로**를 선택

**2. 넥스트 홉 포워딩**

- 매칭된 엔트리의 넥스트 홉(next-hop) 또는 아웃고잉 인터페이스로 패킷 전달
- 위에서 `/25` 경로를 선택했다면, 넥스트 홉은 `192.168.1.200`, 아웃고잉 인터페이스는 `eth3`

**3. TTL(Time To Live) 검사**

- 홉마다 1씩 감소, 0이 되면 폐기 및 원 송신지로 **ICMP Time Exceeded** 메시지 전송

&nbsp;

### 라우팅 프로토콜

- **스태틱 라우팅 (Static)**
  - 관리자가 직접 경로 수동 설정
  - 단순·안정적, 큰 변화 없는 네트워크에 적합
- **다이나믹 라우팅 (Dynamic)**
  - **OSPF** (Open Shortest Path First) **Dijkstra(다익스트라) 알고리즘**으로 최단 경로를 설정
  - **BGP** (External, 경로 벡터) 큰 규모에서 사용 경로들의 집합에서 **결정 기준(Best-Path Selection Process)**른 적용해서 한가지 경로를 찾는다
  - **RIP** (거리 벡터, 홉 수 기준) 단순히 홉 수 기준으로 판단한다
  - 자동으로 경로 학습·갱신 → 네트워크 변화에 유연

&nbsp;

### 라우터의 장단점

| 장점                                    | 단점                                      |
| --------------------------------------- | ----------------------------------------- |
| 서로 다른 서브넷 간 통신 지원           | L2에 비해 포워딩 속도는 느림              |
| 다양한 정책 기반 경로 제어 및 보안 기능 | 설정 복잡도 증가 (특히 다이나믹 프로토콜) |

&nbsp;

## 스위칭과 라우팅

| 구분             | 스위칭 (Switch)                   | 라우팅 (Router)                          |
| ---------------- | --------------------------------- | ---------------------------------------- |
| 계층             | L2 (데이터 링크 계층)             | L3 (네트워크 계층)                       |
| 프레임/패킷 단위 | Ethernet 프레임                   | IP 패킷                                  |
| 주소             | MAC 주소                          | IP 주소                                  |
| 도메인           | 같은 브로드캐스트 도메인 내에서만 | 서로 다른 네트워크(서브넷) 간            |
| 테이블           | MAC 주소 테이블                   | 라우팅 테이블                            |
| 주요 기능        | 포트 학습·포워딩·VLAN 분할        | 최적 경로 선택·넥스트 홉 포워딩·TTL 검사 |
