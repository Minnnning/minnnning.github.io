---
layout: post
title: 오토에버 클라우드 2기 22일차
tags: 네트워크
---

## 스위치 (Switch)
### 단일 장애점(SPoF)
하나의 장비 또는 경로에 장애가 발생하면 전체 네트워크가 마비될 수 있는 구조

해결: 이중화·다중화 설계 (스위치 이중화, 링크 이중화 등)

&nbsp;

### 루프(Loop)
스위치가 물리적으로 고리처럼 연결되어 있을 때 프레임이 무한 전파되는 현상

브로드캐스트 스톰: Flooding → 다른 스위치로 전파 → 반복

MAC 학습 오류: 동일한 MAC이 여러 포트에서 학습되어 정상 포워딩 불가

&nbsp;

### STP (Spanning Tree Protocol)

역할: 스위치 간 물리적 루프를 자동 감지·차단

주요 단계

- BPDU 교환으로 토폴로지 정보 수집

- Root Bridge 선출 (가장 낮은 Bridge ID)

- 포트 역할 결정
  - Root Port, Designated Port, Blocked Port

- 루프 구간 차단 → 물리적 이중화 + 논리적 단일 경로 유지

확장 프로토콜: RSTP(802.1w), MSTP(802.1s)

&nbsp;

### VLAN (Virtual LAN)

목적: 브로드캐스트 도메인 분리 → 성능·보안 강화

종류

- 포트 기반 VLAN

- MAC 기반 VLAN

- Protocol 기반 VLAN (특정 프로토콜 트래픽 분리)

Trunk 포트: 다수 VLAN 프레임을 태그(IEEE 802.1Q)로 구분해 전송

VTP(VLAN Trunking Protocol): Cisco 환경에서 중앙집중식 VLAN 관리

&nbsp;

## 3계층 장비 (Router)
- IP 헤더의 목적지 주소 확인 후 최적 경로로 포워딩

- 브로드캐스트 도메인 분리

- 멀티프로토콜 환경에서 프로토콜 변환 (과거)

- ACL, QoS, NAT 등 부가 기능 수행

**라우팅**

- Static Routing: 관리자가 직접 설정 (간단·직관적, 대규모 네트워크엔 비효율)

- Dynamic Routing: 라우터 간 프로토콜(OSPF, EIGRP, BGP 등)로 경로 정보 교환

- 라우팅 테이블 필드: 목적지 네트워크, 넥스트 홉, 인터페이스, 메트릭

**루프 방지**

- TTL(Time To Live): IP 헤더 필드로 홉 수 제한

- 라우터는 브로드캐스트 패킷을 기본 전달하지 않음 → 스위치 Flooding과 구분

&nbsp;

## 로드밸런서 (Load Balancer)
**4계층 (L4) vs 7계층 (L7)**

- L4: IP+포트 기반 분산 (TCP/UDP)

- L7: HTTP/HTTPS 헤더, 쿠키 등 애플리케이션 정보 기반 분산

**주요 기능**

- 세션 테이블 유지 (대응성·연결 유지)

- 부하 분산 알고리즘: Round Robin, Least Connections, Hash 기반 등

- 헬스체크(Health Check)로 서버 생존성 확인

- SNAT/DNAT, SSL 종료(SSL Offloading), 압축, 캐싱

**용어**

- Virtual Server & Virtual IP: 클라이언트가 접근하는 엔드포인트

- Real Server & Real IP: 실제 백엔드 서버

&nbsp;

## 시스템 확장 (Scaling)
**Scale Up (수직 확장)**

- 기존 서버 성능(메모리·CPU) 강화

- 쉬우나 비용 증가·SPOF 위험

**Scale Out (수평 확장)**

- 같은 사양의 서버 여러 대 분산 배치

- 비용 효율적, 고가용성

&nbsp;

## 방화벽 (Firewall)
**기능**: 패킷 필터링, 세션 관리(Stateful Packet Inspection), 애플리케이션 제어

**유형**

- Stateless: IP/포트 단위 필터링

- Stateful: 세션 상태 추적

&nbsp;

## NAT (Network Address Translation)
**개념**: 사설 IP ↔ 공인 IP 변환

**종류**

- SNAT (Source NAT): 출발지 IP 변경 (주로 사설 → 공인)

- DNAT (Destination NAT): 목적지 IP 변경 (주로 로드밸런싱, 포트 포워딩)

- PAT (Port Address Translation): 다수 사설 IP를 하나의 공인 IP+포트로 매핑

**차이점**

| 구분      | SNAT                     | DNAT                  | PAT                     |
| --------- | ------------------------ | --------------------- | ----------------------- |
| 변경 대상 | 출발지 IP                | 목적지 IP             | 출발지 IP+Port          |
| 사용 예시 | 내부 클라이언트 → 인터넷 | 외부 요청 → 내부 서버 | 여러 내부 → 1개 공인 IP |

&nbsp;

## DNS (Domain Name System)
**역할**: 도메인 ↔ IP 매핑

**계층 구조**: 루트 → TLD → 권한 DNS → 재귀 DNS

**레코드 종류**

- A : IPv4 주소 매핑

- AAAA : IPv6 주소 매핑

- CNAME : 별칭

- vMX : 메일 서버

- NS : 네임서버 지정

- TXT : 텍스트 정보 (SPF, DKIM 등)

**위임(Delegation)**: 하위 도메인 DNS를 별도 서버에서 관리

**TTL(Time To Live)**: 레코드 캐시 유효 시간

&nbsp;